{% extends 'base.html' %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞{% endblock %}

{% block content %}
<div class="card">
    <h1 style="margin-bottom: 30px; color: #333;">üéØ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞</h1>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
        <div style="background: #e9f7ff; padding: 25px; border-radius: 10px; position: relative;">
            <h3 style="margin-bottom: 15px; color: #495057;">üë§ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h3>
            <div style="display: grid; gap: 10px;">
                <div><strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ client.user.username }}</div>
                <div><strong>Email:</strong> {{ client.email }}</div>
                <div><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ client.phone }}</div>
                <div><strong>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</strong> {{ client.location }}</div>
            </div>
            <a href="{% url 'clients:edit_profile' %}" class="btn btn-primary" style="position: absolute; top: 20px; right: 20px; padding: 8px 15px;">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
            </a>
        </div>

        <div style="background: #fff3cd; padding: 25px; border-radius: 10px; position: relative;">
            <h3 style="margin-bottom: 15px; color: #495057;">üöó –í–∞—à –∞–≤—Ç–æ–º–æ–±–∏–ª—å</h3>
            {% if client.get_car_info != "–ù–µ —É–∫–∞–∑–∞–Ω" %}
                <div style="display: grid; gap: 8px;">
                    <div><strong>–ú–∞—Ä–∫–∞:</strong> {{ client.car_brand|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</div>
                    <div><strong>–ú–æ–¥–µ–ª—å:</strong> {{ client.car_model|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</div>
                    <div><strong>–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:</strong> {{ client.car_year|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</div>
                    <div><strong>VIN –∫–æ–¥:</strong> {{ client.car_vin|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</div>
                    <div><strong>–ì–æ—Å–Ω–æ–º–µ—Ä:</strong> {{ client.car_license_plate|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</div>
                </div>
            {% else %}
                <p style="margin-bottom: 15px;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ –Ω–µ —É–∫–∞–∑–∞–Ω–∞</p>
                <a href="{% url 'clients:edit_profile' %}" class="btn btn-secondary">
                    ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å
                </a>
            {% endif %}
            <a href="{% url 'clients:edit_profile' %}" class="btn btn-primary" style="position: absolute; top: 20px; right: 20px; padding: 8px 15px;">
                ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å
            </a>
        </div>
    </div>

    {% if recent_requests %}
    <div style="margin-bottom: 30px;">
        <h3 style="margin-bottom: 20px; color: #333;">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞—è–≤–∫–∏</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
            {% for request in recent_requests %}
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #007bff;">
                <div style="font-weight: bold; margin-bottom: 8px;">{{ request.title }}</div>
                <div style="font-size: 14px; color: #666;">
                    <span style="background: {% if request.status == 'new' %}#28a745{% elif request.status == 'in_progress' %}#007bff{% else %}#6c757d{% endif %}; 
                              color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">
                        {{ request.get_status_display }}
                    </span>
                </div>
                <div style="font-size: 14px; color: #666; margin: 8px 0;">
                    –°–æ–∑–¥–∞–Ω–∞: {{ request.created_at|date:"d.m.Y H:i" }}
                </div>
                <a href="{% url 'clients:repair_request_detail' request.id %}" class="btn btn-primary" style="padding: 5px 12px; font-size: 14px;">
                    üìÑ –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div>
        <h3 style="margin-bottom: 20px; color: #333;">üîß –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <a href="{% url 'clients:create_repair_request' %}" class="btn btn-primary">‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</a>
            <a href="{% url 'clients:repair_requests' %}" class="btn btn-secondary">üìã –ú–æ–∏ –∑–∞—è–≤–∫–∏</a>
            <a href="{% url 'clients:public_repair_requests' %}" class="btn btn-primary">üìù –í—Å–µ –∑–∞—è–≤–∫–∏</a>
            <a href="{% url 'clients:autoservices_map' %}" class="btn btn-secondary">üó∫Ô∏è –ö–∞—Ä—Ç–∞ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–æ–≤</a>
        </div>
    </div>
</div>

<style>
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    cursor: pointer;
    text-align: center;
}

.btn-primary {
    background: #667eea;
    color: white;
}

.btn-primary:hover {
    background: #5a6fd8;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
}
</style>
{% endblock %}